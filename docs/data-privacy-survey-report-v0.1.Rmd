---
title: "Data Privacy Survey: signalling challenges and improvments of privacy-related services in research"
author: "Dorien Huijser & Neha Moopen"
date: "22 april 2022"
output:
  html_document:
    toc: true
    toc_depth: 2
    number_sections: true
    toc_float: true
    theme: united
    highlight: tango
    code_folding: hide
    df_print: paged
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE)
```

## Abstract
In the second quarter of 2022, Utrecht University (UU) Research Data Management 
Support sent out a survey among all scientific personnel at UU: the Data Privacy
Survey. The aim of this survey was to investigate 1) How UU researchers 
currently deal with personal data in research, 2) What challenges they run into 
when handling personal data in research, and 3) How RDM Support and 
collaborators can improve their services and support concerning personal data 
in research. The current report contains a summary of the results of this 
survey, as well as points of action to be taken.

## Report contents

1. Management summary
2. Introduction
3. Methods
4. Results
5. Conclusion and discussion
6. References
7. Technical information

## Management summary

## Introduction
Scientific research often includes some form of personal data. The amount of 
personal data in research is likely underestimated, as researchers may be 
unaware of what personal data are or whether they are being collected. With the 
implementation of the General Data Protection Regulation (GDPR) in May 2018, 
stricter legal requirements apply to handling personal data and its sharing or 
publication. The number of (complex) questions on handling personal data in 
scientific research is increasing. Yet, practical information to resolve these 
questions can be difficult to find, scattered, and/or discipline-specific. As 
such, there is room to better translate the legislation to scientific research 
practice and to provide practical tools for handling personal data in research.

This room for better translation is exemplified in the 
<a href = "https://utrechtuniversity.github.io/dataprivacyproject/" 
target = "_blank">Data Privacy Project</a>, a data support effort^[The Data 
Privacy Project is led by Utrecht University's <a href="https://uu.nl/rdm/" 
target = "_blank">Research Data Management Support</a>,
a collaboration between the University Library and Information Technology 
Services, but there is a tight collaboration with other data support, such as 
first- and second-line privacy officers and information security.] within 
Utrecht University (UU), the Netherlands. The project aims to build knowledge 
and expertise on how researchers can and should deal with personal data. The 
project's deliverables are all focussed on providing practical, actionable and
FAIR (Findable, Accessible, Interoperable, Reusable) information and tools for
researchers to use in their research ^[The project is funded by Utrecht 
Universityâ€™s Research IT program and a Digital Competence Center grant from 
the Dutch Organization for Scientific Research (NWO).]. 

To properly take into account the challenges and needs of our target audience, 
namely UU researchers, one of the deliverables of the project is to perform
quantitative and qualitative investigations into the current practices and needs
of UU researchers concerning the handling of personal data. Our primary research
questions are:

1. To what extent are UU researchers aware of privacy legislation and practices?
2. What data privacy issues do UU researchers typically run into?
3. What support do UU researchers need to handle personal data?

To answer these questions both quantitatively and qualitatively, we have set 
up an online survey and planned one-on-one meetings with a selection of UU 
researchers. This report describes our methods, results and the future steps
that data support at UU can take to improve their services concerning privacy
in research.

## Methods
### Data Privacy Survey
```{r dependencies, warning = FALSE, message = FALSE}
# install.packages("data.table")
library(data.table)

# install.packages("tidyverse")
library(tidyverse)

#install.packages("wordcloud2")
library(wordcloud2)

# install.packages("gridExtra")
library(gridExtra)
```

```{r readdata, cache=TRUE}
# This file has multiple responses in separate columns
datafile <- "../data/raw/Data_Privacy_Survey_20220425.csv"
dppsurvey <- fread(datafile, na.strings = "")

# Skip the first 2 rows as they contain the question text
dppsurvey <- dppsurvey[-c(1, 2), ]

# Skip the previews
dppsurvey <- dppsurvey[-grep("preview",
                             dppsurvey$DistributionChannel), ]

# Convert Duration and Progress into a numeric variable
dppsurvey$Duration <- as.numeric(dppsurvey$`Duration (in seconds)`)
dppsurvey$Progress <- as.numeric(dppsurvey$Progress)

# Skip unnecessary columns
dppsurvey <- dppsurvey[,-c("StartDate","EndDate","Status","IPAddress", 
                           "Duration (in seconds)", "Finished", "RecordedDate", 
                           "ResponseId", "RecipientLastName", "RecipientFirstName",
                           "RecipientEmail", "ExternalReference", "LocationLatitude",
                           "LocationLongitude", "DistributionChannel", "UserLanguage")]

# Select only consented data
dppsurvey <- dppsurvey %>% 
  filter(Consent == "Yes")
```

#### Survey questions 
The Data Privacy Survey was created by the project coordinators (DH, NM) with 
input from the Data Privacy Project team, consisting of privacy officers, data
managers, data consultants, information security and research engineering.
The final version of the survey in Qualtrics consisted of 19-23 questions, 
which were separated into 5 sections:

1. *About you and your research*: 5 questions about the faculty, department, 
position, and type of (personal) data the researcher works with.
2. *Measures and documents*: 4-6 questions about researchers' familiarity and
use of privacy-related measures (e.g., processing register, Data Privacy Impact
Assessment, encryption, pseudonymisation, etc.), data storage, and informed 
consent forms.
3. *Data sharing, archiving and publication*: 3-4 questions about researchers' 
data sharing and publishing practices.
4. *Finding support*: 3-4 questions about the awareness of several data support
channels.
5. *Improving our services*: 4 questions about researchers' challenges, needs, 
and suggestions to improve UU's data privacy support.

The estimated 10 minute duration of the survey in advance proved to be 
relatively accurate: respondents spent an average of 
`r round(median(dppsurvey$Duration/60), 1)` minutes on the survey (range: 
`r round(min(dppsurvey$Duration)/60, 1)` minutes - 
`r round(max(dppsurvey$Duration)/3600/24,1)` days). The majority of researchers
(`r round(length(dppsurvey$Progress[dppsurvey$Progress == 100])/dim(dppsurvey)[1]*100,1)`%) 
fully completed the survey.

#### Procedure
The survey was distributed from March 21st, 2022 onwards via several 
communication channels to reach as many UU researchers as possible:

- An <a href = "https://utrechtuniversity.github.io/dataprivacyproject/20220321-data-privacy-survey.html"
target = "_blank">email</a> was sent to all academic staff at UU through 
central communication channels. The reasoning was that this would be the most
effective way to reach as many UU researchers as possible (taking for granted
that we would likely miss a small part of non-academic personnel also involved
in research in some way).
- A mention in several Faculty newsletters.
- Social media messages (e.g., on <a href = "https://twitter.com/RDMsupportUU/status/1517390979707412481"
target = "_blank">Twitter</a>).
- A <a href = "https://intranet.uu.nl/en/news/news-items/survey-better-support-for-handling-privacy-sensitive-data-in-research" 
target = "_blank">news item</a> on the UU intranet.
- Via data support colleagues, who were asked to point researchers they were
in contact with to the survey.

Researchers could provide voluntarily whether they wanted to participate in the
survey. The survey only started after they had provided their consent. All 
results reported here are from researchers who provided their active consent. 

#### Survey respondents
The survey was filled out by `r dim(dppsurvey)[1]` UU researchers. The survey
was created in such a way so that only researchers from a UU faculty, who 
worked with personal research data, were selected to respond to all other survey
questions.

We received responses from each faculty, but the distribution is not equal: 
the faculties of Science and Social and Behavioural Sciences are 
overrepresented, whereas the responses of the Faculty of Geosciences and the 
Faculty of Medicine are rather low. This can be explained by the fact that 
a large chunk of research performed at the  Faculty of Geosciences does 
not investigate human behavior and therefore does not work with personal data 
much. The Faculty of Medicine, then, is located at the University Medical 
Center Utrecht (UMCU) and is not of primary interest for the current survey, 
as it concerns an entirely different organisation with a separate research 
support structure.

As can be seen in the figure on the right, most respondents are early 
career researchers (PhDs, junior researchers and postdoctoral researchers). 
We suspect that this is because 1) there simply are more early-career 
researchers than mid- and late career researchers, and 2) early-career 
researchers experience a greater need for support with respect to handling 
personal data.

```{r facultyplot}
# R color brewers palettes: http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/
# UU colors: https://www.uu.nl/organisatie/huisstijl/huisstijlelementen/kleur
UU_pallette <- c("#FFCD00", "#FFE6AB", "#F3965E", "#AA1555", "#6E3B23", "#24A793", "#5287C6", "#001240", "#5B2182")

# Simple barplot of faculty division (WORKS, yet to prettify)
facultyplot <- 
  dppsurvey %>% 
  pivot_longer(cols = grep("Faculty_[0-9]$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "Faculty") %>%
  select(-name) %>%
  group_by(Faculty) %>%
  summarise(Count = length(Faculty)) %>%
  arrange(Count) %>% # Order by count
  mutate(Faculty = factor(Faculty, levels=Faculty)) %>% # Update factor levels
  ggplot(aes(x = Faculty, y = Count)) + 
  geom_bar(stat = "identity") + 
  labs(x = "", title = "Faculties",
       caption = "UU faculty representation in the Data Privacy Survey") +
  coord_flip() +
  theme_classic() +
  geom_label(aes(label = Count), position=position_dodge(width=1.2),
             color = "black",
             fill = "#FFCD00")

# Simple barplot of position division (WORKS, yet to prettify)
positionplot <-
  dppsurvey %>% 
  pivot_longer(cols = grep("Position_[0-9]$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "Position") %>%
  select(-name) %>%
  group_by(Position) %>%
  summarise(Count = length(Position)) %>%
  arrange(Count) %>% # Order by count
  mutate(Position = factor(Position, levels=Position)) %>% # Update factor levels
  ggplot(aes(x = Position, y = Count)) + 
  geom_bar(stat = "identity") + 
  labs(x = "", title = "Position",
       caption = "Positions of Data Privacy Survey respondents") +
  coord_flip() +
  theme_classic() + 
  geom_label(aes(label = Count), position=position_dodge(width=1.2),
             color = "black",
             fill = "#FFCD00")

grid.arrange(facultyplot, positionplot, nrow = 1)
```

#### Analysis
Below we report on the descriptive statistics or summaries from most of the 
survey questions. As we did not formulate hypotheses, no statistical analyses 
were performed. 

#### Data and material availability
The entire survey can be found 
<a href = "https://utrechtuniversity.github.io/dataprivacyproject/assets/docs/survey-questions-qualtrics.pdf"
target = "_blank">on our website</a>, as well as the separate 
<a href = "https://utrechtuniversity.github.io/dataprivacyproject/assets/docs/survey-privacy-statement.pdf" 
target = "_blank">privacy statement</a>. The script can be found in the designated
<a href = "https://github.com/UtrechtUniversity/dataprivacysurvey" target = 
"_blank">GitHub repository</a>. As the raw data contain personal information (IP 
address, demographic information, open text responses and email addresses), and
no consent was obtained to share those details, we are unable to share them.

### One-on-one meetings
The one-on-one meetings are currently being conducted. More will be shared soon!

## Results

### Types of research data

Within the sample of the survey, it is clear that most researchers use tabular, textual, code and audio data as their primary research data format. The most encountered type of *personal* data that researchers indicate to work with are contact information, demographic information and direct identifiers. This can be either because these are the types of personal data that are indeed most common, or because researchers mostly recognize these types of data as being personal data.

```{r datatypes}
# count
#sum(!is.na(dppsurvey$Datatype_1))

# percentage
#sum(!is.na(dppsurvey$Datatype_1))/dim(dppsurvey)[1]

# text label
#unique(dppsurvey$Datatype_1)[1]

# Table of data types
datatypetable <- dppsurvey %>% 
  pivot_longer(cols = grep("^Datatype_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "Datatype") %>%
  select(-name) %>%
  group_by(Datatype) %>%
  summarise(Count = length(Datatype)) %>%
  arrange(Count) %>% # Order by count
  mutate(Datatype = factor(Datatype, levels=Datatype)) %>% # Update factor levels
  mutate(Percentage = round(Count/dim(dppsurvey)[1]*100,1)) %>%
  map_df(rev) %>% # reverse order
  print()

# Table of personal data types
tablepersdata <- dppsurvey %>% 
  pivot_longer(cols = grep("^Personaldata_type_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "Personal_Datatype") %>%
  select(-name) %>%
  group_by(Personal_Datatype) %>%
  summarise(Count = length(Personal_Datatype)) %>%
  arrange(Count) %>% # Order by count
  mutate(Personal_Datatype = factor(Personal_Datatype, levels=Personal_Datatype), # Update factor levels
         Percentage = round(Count/dim(dppsurvey)[1]*100,1)) %>%
  map_df(rev) %>% # reverse order
  print()

# Donut chart of personal data types --> Nr of categories = too large! But does work otherwise
#perstypedonut <- dppsurvey %>% 
#  pivot_longer(cols = grep("^Personaldata_type_[0-9]+$", names(dppsurvey), value=TRUE), 
#               values_drop_na = TRUE,
#               values_to = "Personal_Datatype") %>%
#  select(-name) %>%
#  group_by(Personal_Datatype) %>%
#  summarise(Count = length(Personal_Datatype)) %>%
#  arrange(Count) %>% # Order by count
#  mutate(Personal_Datatype = factor(Personal_Datatype, levels=Personal_Datatype), # Update factor levels
#         Percentage = round(Count/dim(dppsurvey)[1]*100,1),
#         ymax = cumsum(Percentage),
#         ymin = c(0, head(ymax, n = -1)),
#         labelPosition = (ymax + ymin)/2,
#         label = paste0(Personal_Datatype, ": ", Percentage, "%")) %>% 
#  ggplot(aes(ymax = ymax, ymin = ymin, xmax = 4, xmin = 3, fill = Personal_Datatype)) +
#  geom_rect() + 
#  geom_label(x = 3.5, aes(y = labelPosition, label = label), size = 6) +
#  scale_fill_brewer(palette=4) +
# coord_polar(theta="y") + 
# xlim(c(2,4)) + 
#  theme_void() +
#  theme(legend.position = "none")
```

**TO DO: wrangle Dept_ columns so that they can be displayed within Faculties**

### Current practices in handling personal data

The first part of the survey addressed the researchers' current practices in 
handling personal data in their research.

#### - Organisational and technical measures

With respect to organisational and technical measures used to handle personal data, most researchers indicate they pseudonymise/anonymise their data. We cannot, however, assess whether the data is sufficiently pseudonymised/anonymised in line with the GDPR. Researchers also implement some form of access control and complete data management plans (DMPs). Agreements, such as NDAs, are utilized to some degree as well. On the other hand, GDPR-specific assessments such as DPIAs or privacy reviews are least used - as it stands, these assessments are still only carried out on a case-by-case basis.   
 
```{r}

hpd_measures_plot <- 
  dppsurvey %>% 
  pivot_longer(cols = grep("^Orgmeasures_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "Measures") %>%
  select(-name) %>%
  group_by(Measures) %>%
  summarise(Count = length(Measures)) %>%
  arrange(Count) %>% # Order by count
  mutate(Measures = factor(Measures, levels=Measures)) %>% # Update factor levels
  ggplot(aes(x = Measures, y = Count)) + 
  geom_bar(stat = "identity") + 
  labs(x = "", title = "Measures",
       caption = "Organisational and technical measures used in handling personal data") +
  coord_flip() +
  theme_classic() +
  geom_label(aes(label = Count), position=position_dodge(width=1.2),
             color = "black",
             fill = "#FFCD00")

  print(hpd_measures_plot)
```

```{r}
# table of measures used

hpd_measures_table <- dppsurvey %>% 
  pivot_longer(cols = grep("^Orgmeasures_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "Measures") %>%
  select(-name) %>%
  group_by(Measures) %>%
  summarise(Count = length(Measures)) %>%
  arrange(Count) %>% # Order by count
  mutate(Measures = factor(Measures, levels=Measures)) %>% # Update factor levels
  mutate(Percentage = round(Count/dim(dppsurvey)[1]*100,1)) %>%
  map_df(rev) %>% # reverse order
  print()
```

#### Storage media used

To store personal data, most researchers rely on storage solutions provided by UU. Nonetheless, some researchers utilize non-UU solutions, including non-UU cloud storage. Several researchers also indicated they use 'Other' storage solutions - the survey responses do not provide more information on this option.

```{r}
storage_used_plot <- dppsurvey %>% 
  pivot_longer(cols = grep("^Storage_medium_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "Storage") %>%
  select(-name) %>%
  group_by(Storage) %>%
  summarise(Count = length(Storage)) %>%
  arrange(Count) %>% # Order by count
  mutate(Storage = factor(Storage, levels=Storage)) %>% # Update factor levels
  ggplot(aes(x = Storage, y = Count)) + 
  geom_bar(stat = "identity") + 
  labs(x = "", title = "Storage",
       caption = "Storage Media Used in Handling Personal Data") +
  coord_flip() +
  theme_classic() +
  geom_label(aes(label = Count), position=position_dodge(width=1.2),
             color = "black",
             fill = "#FFCD00")

  print(storage_used_plot)
```


```{r}
# table storage media used

storage_used_table <- dppsurvey %>% 
  pivot_longer(cols = grep("^Storage_medium_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "Storage") %>%
  select(-name) %>%
  group_by(Storage) %>%
  summarise(Count = length(Storage)) %>%
  arrange(Count) %>% # Order by count
  mutate(Storage = factor(Storage, levels=Storage)) %>% # Update factor levels
  mutate(Percentage = round(Count/dim(dppsurvey)[1]*100,1)) %>%
  map_df(rev) %>% # reverse order
  print()
```

### Consent forms: usage and content

Only a small number researchers indicated that consent forms were not applicable to their research or they didn't know what they were. When researchers do use consent forms, they often use forms approved by privacy officers or ethical committees. Researchers also indicated they tend to independently create and use forms. Departmental and UU-wide templates are also used to a fair extent, as well as 'Other' templates.

Within the consent forms, most researchers provide information on the purposes for data collection and which data will be be used. Information on the data subject's rights and safeguards are included as well. Information on data sharing and reuse is presented, not as consistently as the aforementioned topics. 

Most researchers indicate that 'regular' consent is explicitly requested, but consent to data sharing and further use is not always requested. This is a point of concern because it may not be sufficient to merely inform data subjects that their data may be shared or reused, but data subjects should explicitly provide permission for their data to be used beyond the research project they signed on to. 

Lastly, contact details of the DPO is not always included.

```{r}
consent_usage_plot <- dppsurvey %>% 
  pivot_longer(cols = grep("^Consentforms_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "Consent_Forms") %>%
  select(-name) %>%
  group_by(Consent_Forms) %>%
  summarise(Count = length(Consent_Forms)) %>%
  arrange(Count) %>% # Order by count
  mutate(Consent_Forms = factor(Consent_Forms, levels=Consent_Forms)) %>% # Update factor levels
  ggplot(aes(x = Consent_Forms, y = Count)) + 
  geom_bar(stat = "identity") + 
  labs(x = "", title = "Consent Forms",
       caption = "Consent Forms: Usage") +
  coord_flip() +
  theme_classic() +
  geom_label(aes(label = Count), position=position_dodge(width=1.2),
             color = "black",
             fill = "#FFCD00")

  print(consent_usage_plot)

```

```{r}
# table of consent forms used

consent_usage_table <- dppsurvey %>% 
  pivot_longer(cols = grep("^Consentforms_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "Consent_Forms") %>%
  select(-name) %>%
  group_by(Consent_Forms) %>%
  summarise(Count = length(Consent_Forms)) %>%
  arrange(Count) %>% # Order by count
  mutate(Consent_Forms = factor(Consent_Forms, levels=Consent_Forms)) %>% # Update factor levels
  mutate(Percentage = round(Count/dim(dppsurvey)[1]*100,1)) %>%
  map_df(rev) %>% # reverse order
  print()
```

```{r}
consent_content_plot <- dppsurvey %>% 
  pivot_longer(cols = grep("^Consent_content_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "Consent_Content") %>%
  select(-name) %>%
  group_by(Consent_Content) %>%
  summarise(Count = length(Consent_Content)) %>%
  arrange(Count) %>% # Order by count
  mutate(Consent_Content = factor(Consent_Content, levels=Consent_Content)) %>% # Update factor levels
  ggplot(aes(x = Consent_Content, y = Count)) + 
  geom_bar(stat = "identity") + 
  labs(x = "", title = "Consent Content",
       caption = "Consent Forms: Content") +
  coord_flip() +
  theme_classic() +
  geom_label(aes(label = Count), position=position_dodge(width=1.2),
             color = "black",
             fill = "#FFCD00")

  print(consent_content_plot)

```

```{r}
# table of content in consent forms

consent_content_table <- dppsurvey %>% 
  pivot_longer(cols = grep("^Consent_content_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "Consent_Content") %>%
  select(-name) %>%
  group_by(Consent_Content) %>%
  summarise(Count = length(Consent_Content)) %>%
  arrange(Count) %>% # Order by count
  mutate(Consent_Content = factor(Consent_Content, levels=Consent_Content)) %>% # Update factor levels
  mutate(Percentage = round(Count/dim(dppsurvey)[1]*100,1)) %>%
  map_df(rev) %>% # reverse order
  print()
```

### DPIA: familiarity and help used

Most of the researchers who responded to the survey indicated that they have never carried out a DPIA, nor had they ever heard of it.  

A small number of researchers have heard of DPIAs, but have not completed one. A similar number researchers indicated that they are familiar with and have completed a Data Protection Impact Assessment (DPIA). Most of these researchers received help from a Privacy Officer with their DPIAs and few recieved help from either RDM Support or Legal Affairs. Some researchers indicated they received 'Other' help or none at all.

```{r}
DPIA_experience_plot <- dppsurvey %>% 
  pivot_longer(cols = grep("^DPIA_experience_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "DPIA_experience") %>%
  select(-name) %>%
  group_by(DPIA_experience) %>%
  summarise(Count = length(DPIA_experience)) %>%
  arrange(Count) %>% # Order by count
  mutate(DPIA_exeperience = factor(DPIA_experience, levels=DPIA_experience)) %>% # Update factor levels
  ggplot(aes(x = DPIA_experience, y = Count)) + 
  geom_bar(stat = "identity") + 
  labs(x = "", title = "DPIA Experience",
       caption = "Familiarity and experience with DPIAs") +
  coord_flip() +
  theme_classic() +
  geom_label(aes(label = Count), position=position_dodge(width=1.2),
             color = "black",
             fill = "#FFCD00")

  print(DPIA_experience_plot)

```

```{r}
# table  on experience with DPIAs

DPIA_experience_table <- dppsurvey %>% 
  pivot_longer(cols = grep("^DPIA_experience_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "DPIA_experience") %>%
  select(-name) %>%
  group_by(DPIA_experience) %>%
  summarise(Count = length(DPIA_experience)) %>%
  arrange(Count) %>% # Order by count
  mutate(DPIA_experience = factor(DPIA_experience, levels=DPIA_experience)) %>% # Update factor levels
  mutate(Percentage = round(Count/dim(dppsurvey)[1]*100,1)) %>%
  map_df(rev) %>% # reverse order
  print()
```

```{r}
DPIA_help_plot <- dppsurvey %>% 
  pivot_longer(cols = grep("^DPIA_Help_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "DPIA_help") %>%
  select(-name) %>%
  group_by(DPIA_help) %>%
  summarise(Count = length(DPIA_help)) %>%
  arrange(Count) %>% # Order by count
  mutate(DPIA_help = factor(DPIA_help, levels=DPIA_help)) %>% # Update factor levels
  ggplot(aes(x = DPIA_help, y = Count)) + 
  geom_bar(stat = "identity") + 
  labs(x = "", title = "DPIA Help",
       caption = "Help recieved with DPIAs") +
  coord_flip() +
  theme_classic() +
  geom_label(aes(label = Count), position=position_dodge(width=1.2),
             color = "black",
             fill = "#FFCD00")

  print(DPIA_help_plot)
```


```{r}
# table on help with DPIAs

DPIA_help_table <- dppsurvey %>% 
  pivot_longer(cols = grep("^DPIA_Help_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "DPIA_help") %>%
  select(-name) %>%
  group_by(DPIA_help) %>%
  summarise(Count = length(DPIA_help)) %>%
  arrange(Count) %>% # Order by count
  mutate(DPIA_help = factor(DPIA_help, levels=DPIA_help)) %>% # Update factor levels
  mutate(Percentage = round(Count/dim(dppsurvey)[1]*100,1)) %>%
  map_df(rev) %>% # reverse order
  print()

```

### Data sharing practices: externally and if so, which measures are used?

While there are some researchers who don't share their data at all, most researchers who responded to the survey indicated they do not share data with external parties, but only within the UU. A smaller number of researchers indicated they share data within the EEA and a similar number selected 'Other' - but the survey does not provide information about what this means. There are researchers who share data outside the EEA, most of these researchers share data with countries deemed to have an adequate level of protection according the GDPR and a few share with countries without an adequate level of protection.

Most researchers pseudonimize their data before sharing with external parties, though we cannot assess if this pseudonymisation is sufficient or not. Researchers also make use of approved tools, data transfer agreements, data processing agreements. Providing access without transfering the data is also a measure that is utilized. Fewer researchers indicated they involved a Privacy Officer, Data Manager while transferring data and the use of Standard Contractual Clauses appears limited.

```{r}
external_sharing_plot <- dppsurvey %>% 
  pivot_longer(cols = grep("^Share_outside_UU_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "external_sharing") %>%
  select(-name) %>%
  group_by(external_sharing) %>%
  summarise(Count = length(external_sharing)) %>%
  arrange(Count) %>% # Order by count
  mutate(external_sharing = factor(external_sharing, levels=external_sharing)) %>% # Update factor levels
  ggplot(aes(x = external_sharing, y = Count)) + 
  geom_bar(stat = "identity") + 
  labs(x = "", title = "Data Sharing (external)",
       caption = "Data Sharing with External Parties") +
  coord_flip() +
  theme_classic() +
  geom_label(aes(label = Count), position=position_dodge(width=1.2),
             color = "black",
             fill = "#FFCD00")

  print(external_sharing_plot)
```


```{r}
external_sharing_table <- dppsurvey %>% 
  pivot_longer(cols = grep("^Share_outside_UU_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "external_sharing") %>%
  select(-name) %>%
  group_by(external_sharing) %>%
  summarise(Count = length(external_sharing)) %>%
  arrange(Count) %>% # Order by count
  mutate(external_sharing = factor(external_sharing, levels=external_sharing)) %>% # Update factor levels
  mutate(Percentage = round(Count/dim(dppsurvey)[1]*100,1)) %>%
  map_df(rev) %>% # reverse order
  print()

```


```{r}
sharing_measures_plot <- dppsurvey %>% 
  pivot_longer(cols = grep("^Share_measures_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "sharing_measures") %>%
  select(-name) %>%
  group_by(sharing_measures) %>%
  summarise(Count = length(sharing_measures)) %>%
  arrange(Count) %>% # Order by count
  mutate(sharing_measures = factor(sharing_measures, levels=sharing_measures)) %>% # Update factor levels
  ggplot(aes(x = sharing_measures, y = Count)) + 
  geom_bar(stat = "identity") + 
  labs(x = "", title = "Data Sharing (protection practices)",
       caption = "Protection measures taken while sharing data") +
  coord_flip() +
  theme_classic() +
  geom_label(aes(label = Count), position=position_dodge(width=1.2),
             color = "black",
             fill = "#FFCD00")

  print(sharing_measures_plot)
```


```{r}
sharing_measures_table <- dppsurvey %>% 
  pivot_longer(cols = grep("^Share_measures_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "sharing_measures") %>%
  select(-name) %>%
  group_by(sharing_measures) %>%
  summarise(Count = length(sharing_measures)) %>%
  arrange(Count) %>% # Order by count
  mutate(sharing_measures = factor(sharing_measures, levels=sharing_measures)) %>% # Update factor levels
  mutate(Percentage = round(Count/dim(dppsurvey)[1]*100,1)) %>%
  map_df(rev) %>% # reverse order
  print()

```

### Data publishing: does that ever happen and if so, in what format. IF not: why not?

```{r}

data_publishing_plot <- dppsurvey %>% 
  pivot_longer(cols = grep("^Data_publication_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "data_publishing") %>%
  select(-name) %>%
  group_by(data_publishing) %>%
  summarise(Count = length(data_publishing)) %>%
  arrange(Count) %>% # Order by count
  mutate(data_publishing = factor(data_publishing, levels=data_publishing)) %>% # Update factor levels
  ggplot(aes(x = data_publishing, y = Count)) + 
  geom_bar(stat = "identity") + 
  labs(x = "", title = "Data Publishing",
       caption = "Data Publishing: Frequency and Content") +
  coord_flip() +
  theme_classic() +
  geom_label(aes(label = Count), position=position_dodge(width=1.2),
             color = "black",
             fill = "#FFCD00")

  print(data_publishing_plot)
```


```{r}
data_publishing_table <- dppsurvey %>% 
  pivot_longer(cols = grep("^Data_publication_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "data_publishing") %>%
  select(-name) %>%
  group_by(data_publishing) %>%
  summarise(Count = length(data_publishing)) %>%
  arrange(Count) %>% # Order by count
  mutate(data_publishing = factor(data_publishing, levels=data_publishing)) %>% # Update factor levels
  mutate(Percentage = round(Count/dim(dppsurvey)[1]*100,1)) %>%
  map_df(rev) %>% # reverse order
  print()

```
The majority of researchers who responded to their survey indicated that they do not publish their data in any way or form. The primary reason for not publishing data appears to be that researchers are still working on the data. Nonetheless, many researchers indicate that they don't want to/need to publish their and 'Other' reasons were also indicated. A smaller group of researchers do not publish their data because they cannot anonymize the data. Other reasons include a lack of legal basis or not knowing if they're allowed to publish the data. Only a few researchers indicated they don't know how to publish data at all

If a publication is made, most researchers tend to publish the metadata only while fewer publish the entire data set. Researchers tend to publish anonymous data primarily, followed by pseudonymized data. As with previous responses, it is not possible to assess whether this anonymisation or pseudonymisation was adequate.

```{r}

publication_format_plot <- dppsurvey %>% 
  pivot_longer(cols = grep("^Publication_format_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "publication_format") %>%
  select(-name) %>%
  group_by(publication_format) %>%
  summarise(Count = length(publication_format)) %>%
  arrange(Count) %>% # Order by count
  mutate(publication_format = factor(publication_format, levels=publication_format)) %>% # Update factor levels
  ggplot(aes(x = publication_format, y = Count)) + 
  geom_bar(stat = "identity") + 
  labs(x = "", title = "Data Publishing: Format",
       caption = "Format of Published Data") +
  coord_flip() +
  theme_classic() +
  geom_label(aes(label = Count), position=position_dodge(width=1.2),
             color = "black",
             fill = "#FFCD00")

  print(publication_format_plot)

```


```{r}
# publication format

publication_format_table <- dppsurvey %>% 
  pivot_longer(cols = grep("^Publication_format_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "publication_format") %>%
  select(-name) %>%
  group_by(publication_format) %>%
  summarise(Count = length(publication_format)) %>%
  arrange(Count) %>% # Order by count
  mutate(publication_format = factor(publication_format, levels=publication_format)) %>% # Update factor levels
  mutate(Percentage = round(Count/dim(dppsurvey)[1]*100,1)) %>%
  map_df(rev) %>% # reverse order
  print()

```

```{r}

reasons_nopub_plot <- dppsurvey %>% 
  pivot_longer(cols = grep("^Reason_NoPub_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "reasons_nopub") %>%
  select(-name) %>%
  group_by(reasons_nopub) %>%
  summarise(Count = length(reasons_nopub)) %>%
  arrange(Count) %>% # Order by count
  mutate(reasons_nopub = factor(reasons_nopub, levels=reasons_nopub)) %>% # Update factor levels
  ggplot(aes(x = reasons_nopub, y = Count)) + 
  geom_bar(stat = "identity") + 
  labs(x = "", title = "Data Publishing: Reasons for Not Publishing",
       caption = "Reasons for Not Publishing Data") +
  coord_flip() +
  theme_classic() +
  geom_label(aes(label = Count), position=position_dodge(width=1.2),
             color = "black",
             fill = "#FFCD00")

  print(reasons_nopub_plot)
```


```{r}
# reasons for not publishing

reasons_nopub_table <- dppsurvey %>% 
  pivot_longer(cols = grep("^Reason_NoPub_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "reasons_nopub") %>%
  select(-name) %>%
  group_by(reasons_nopub) %>%
  summarise(Count = length(reasons_nopub)) %>%
  arrange(Count) %>% # Order by count
  mutate(reasons_nopub = factor(reasons_nopub, levels=reasons_nopub)) %>% # Update factor levels
  mutate(Percentage = round(Count/dim(dppsurvey)[1]*100,1)) %>%
  map_df(rev) %>% # reverse order
  print()

```

### Existing support channels

#### Faculty privacy officer
The second part of the survey concerned the visibility and use of existing 
support channels. When asked whether respondents know who their faculty
privacy officer is, most respondents indicated that they do 
not (Yes: `r sum(dppsurvey$Know_PO=="Yes", na.rm=TRUE)` 
(`r round(sum(dppsurvey$Know_PO=="Yes", na.rm=TRUE)/dim(dppsurvey)[1]*100,0)`%), No: 
`r sum(dppsurvey$Know_PO=="No", na.rm=TRUE)` 
(`r round(sum(dppsurvey$Know_PO=="Yes", na.rm=TRUE)/dim(dppsurvey)[1]*100,0)`%), NA: 
`r sum(is.na(dppsurvey$Know_PO))` 
(`r round(sum(is.na(dppsurvey$Know_PO))/dim(dppsurvey)[1]*100,0)`%)). This 
suggests either that researchers have simply never required help from their privacy 
officer, or that the faculty privacy officers could increase their visibility
within their faculties.

#### Looking for help


have you looked for help and ifso, did you find what you were looking for?

#### Channels used to find support


- Which channels are mostly used?

```{r existingsupport}
# Ever looked for help with privacy?
lookedforhelpplot <- dppsurvey %>% 
  pivot_longer(cols = Lookedforhelp, 
               values_drop_na = TRUE,
               values_to = "searchhelp") %>%
  select(-name) %>%
  group_by(searchhelp) %>%
  summarise(Count = length(searchhelp)) %>%
  arrange(Count) %>% # Order by count
  mutate(searchhelp = factor(searchhelp, levels = searchhelp)) %>% # Update factor levels
  ggplot(aes(x = searchhelp, y = Count)) + 
  geom_bar(stat = "identity") + 
  labs(x = "", title = "Looked for help?") +
  theme_classic() + 
  geom_label(aes(label = Count), position=position_dodge(width=1.2),
             color = "black",
             fill = "#FFCD00")

# Found what you're looking for?
foundhelpplot <- dppsurvey %>% 
  pivot_longer(cols = Foundhelp, 
               values_drop_na = TRUE,
               values_to = "foundhelp") %>%
  select(-name) %>%
  group_by(foundhelp) %>%
  summarise(Count = length(foundhelp)) %>%
  arrange(Count) %>% # Order by count
  mutate(foundhelp = factor(foundhelp, levels = c("(Almost) always", 
                                                  "Often",
                                                  "Sometimes",
                                                  "(Almost) never"))) %>% # Update factor levels
  ggplot(aes(x = foundhelp, y = Count)) + 
  geom_bar(stat = "identity") + 
  labs(x = "", title = "Find what you were looking for?") +
  theme_classic() + 
  geom_label(aes(label = Count), position=position_dodge(width=1.2),
             color = "black",
             fill = "#FFCD00")

grid.arrange(lookedforhelpplot, foundhelpplot, nrow = 1)
```

```{r sourcesused}
# Sources used to find information and help
sourcesusedplot <- dppsurvey %>% 
  pivot_longer(cols = grep("^Sourcesused_[0-9]+$", names(dppsurvey), value=TRUE), 
               values_drop_na = TRUE,
               values_to = "sourcesused") %>%
  select(-name) %>%
  group_by(sourcesused) %>%
  summarise(Count = length(sourcesused)) %>%
  arrange(Count) %>% # Order by count
  mutate(sourcesused = factor(sourcesused, levels = sourcesused)) %>% # Update factor levels
  ggplot(aes(x = sourcesused, y = Count)) + 
  geom_bar(stat = "identity") + 
  labs(x = "", title = "Sources used to find help") +
  coord_flip() +
  theme_classic() + 
  geom_label(aes(label = Count), position=position_dodge(width=1.2),
             color = "black",
             fill = "#FFCD00")

sourcesusedplot

# Other sources used
sourcesusedother <- 
  dppsurvey$Sourcesused_19_TEXT[!is.na(dppsurvey$Sourcesused_19_TEXT)] %>%
  unlist() %>%
  str_trim() %>%
  str_to_lower()
```


### Challenges and needs

- Is privacy an obstacle?
- What do you need for better support?
- Open text: challenges and needs
  
## Conclusion and discussion

## References

## Technical information
This document was last created on: `r as.character(Sys.Date())`.

```{r sessioninfo}
sessionInfo()
```
